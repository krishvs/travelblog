<%- model_class = Folder -%>
  <div class="col-sm-10 col-sm-offset-1">
    <div class="row ">
      <div class="page-header col-xs-9">
        <span class="main-heading"><%=t '.title', :default => Trip %>/<%= @trip.name %>/<%= @folder.name %></span>
      </div>
      <div class="new-project-btn-div col-xs-3">
        <%= link_to new_trip_folder_path(@trip),
                :class => 'btn btn-default new-project' do%>
          <i class="fa fa-folder-o "></i> New Folder
        <%- end -%>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-3">
        <ul class="nav nav-pills nav-stacked custom-sidebar">
          <li class="sidebar-active"><%= link_to 'Descriptions',
              trip_folder_path(:trip_id => @trip.name, :id => @folder.name) %>
          </li>
          <li><%= link_to 'Maps',
              trip_folder_maps_path(:trip_id => @trip.name, :folder_id => @folder.name) %>
          </li>
          <li><%= link_to 'Reminders',
              trip_folder_reminders_path(:trip_id => @trip.name, :folder_id => @folder.name) %>
          </li>
          <li><%= link_to 'Timeline',
              activity_trip_folder_path(:trip_id => @trip.name, :id => @folder.name) %>
          </li>
          <li><a href="">Cost</a></li>
          <li><%= link_to 'Photos',
              trip_folder_photos_path(:trip_id => @trip.name, :folder_id => @folder.name) %>
          </li>
          <li><a href="#">Videos</a></li>
        </ul>
      </div>
      <div class="col-sm-9" id="pjax-container">
        <div class="row">
          <% @folder.descriptions.each do |description| %>
            <div class="col-xs-4 ">
              <div class="panel panel-default folder-display-panel" data-folder-path="<%=trip_folder_description_path(:trip_id => @trip.name,:folder_id => @folder.name, :id => description.title)%>">
                <div class="panel-body folders-display-body">
                  <div class="overlay-div row">
                    <div class="col-xs-2 col-xs-offset-4 add-margin">
                      <%= link_to trip_folder_description_path(:trip_id => @trip.name,:folder_id => @folder.name, :id => description.title), :method => :delete, :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) }, :class => '', :title => "#{ t('.destroy', :default => t('helpers.links.destroy')) }" do %>
                       <i class="fa fa-trash-o fa-2x"></i>
                      <%- end -%>
                    </div>
                     <div class="col-xs-2 add-margin">
                      <i class="fa fa-pencil-square-o fa-2x custom-edit-icon" id="" data-folder-edit-path="<%= edit_trip_folder_description_path(:trip_id => @trip.name,:folder_id => @folder.name, :id => description.title)%>"></i> 
                    </div>
                  </div>
                  <div class="row content-body">
                    <div class="col-xs-12">
                      <%= raw description.description %>
                    </div>
                    <div class="col-xs-12 description">
                        <span class="time"><%= description.updated_at %></span>
                    </div>
                  </div>
                </div>
                <div class="panel-footer"><h5><%= description.title.capitalize %></h5></div>
              </div>
            </div>
          <% end %>
            <div class="col-sm-4">
              <div class="panel panel-default ">
                <div class="panel-body">
                    New Description
                     <i class="fa fa-plus fa-2x" id="new-description"></i>
                </div>
                <div class="panel-footer">Panel footer</div>
              </div>
            </div>
        </div>
      </div>
    </div>   
  </div>
<script>
  $(function(){
    $(document).on('click','.folder-display-panel', function(){
      window.location.href = $(this).attr("data-folder-path");
    });

    $('.folder-display-panel').hover(function(){
      console.log('I am in hover');
      $(this).find('.panel-footer').first().addClass('darken');
      $(this).find('.panel-body').first().addClass('whiten');
      $(this).find('.overlay-div').first().show();
      console.log( $(this).find('.panel-footer').first().attr('class'))
    },function(){
       $(this).find('.panel-body').first().removeClass('whiten');
      $(this).find('.panel-footer').first().removeClass('darken');
      $(this).find('.overlay-div').first().hide();
      // $(this).removeClass('darken');
    });

    $('.time').each(function(){
      $(this).html('updated '+moment($(this).html(), "YYYYMMDD").fromNow());
    });

    $(document).on('click','#new-description', function(){
      $.pjax({
        url: "<%= new_trip_folder_description_path(:trip_id => @trip.name, :folder_id => @folder.name) %>",
        container: '#pjax-container'
      }); 
    });
  })

</script>


<!-- <div class="page-header">
  <h1><%=t '.title', :default => Folder %></h1>
</div>

<div class="fieldset">
  <dl>
      <dt class="label label-default"><%= model_class.human_attribute_name(:name) %></dt>
      <dd><pre class="prettyprint"><%= @folder.name %></pre></dd>
      <dt class="label label-default"><%= model_class.human_attribute_name(:mode) %></dt>
      <dd><pre class="prettyprint"><%= @folder.mode %></pre></dd>
      <dt class="label label-default"><%= model_class.human_attribute_name(:total_cost) %></dt>
      <dd><pre class="prettyprint"><%= @folder.total_cost %></pre></dd>
      <dt class="label label-default"><%= model_class.human_attribute_name(:description) %></dt>
      <dd><pre class="prettyprint"><%= @folder.description %></pre></dd>
  </dl>
</div>

<div class="form-group">
  <%= link_to t('.back', :default => t("helpers.links.back")),
              trip_folders_path(:trip_id => @trip.name), :class => 'btn btn-default'  %>
  <%= link_to t('.edit', :default => t("helpers.links.edit")),
              edit_trip_folder_path(:trip_id => @trip.name,:id => @folder.name), :class => 'btn btn-default' %>
  <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
              trip_folder_path(:trip_id => @trip.name,:id => @folder.name),
              :method => 'delete',
              :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
              :class => 'btn btn-danger' %>
</div> -->

